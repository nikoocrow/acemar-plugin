(()=>{function e(e,t){if(!e)return;e.querySelectorAll(".acemar-sede-card").forEach(e=>{e.classList.toggle("is-active",e.dataset.sedeId===t)});const a=e.querySelector(`.acemar-sede-card[data-sede-id="${t}"]`);a&&a.scrollIntoView({behavior:"smooth",block:"nearest"})}window.acemarInitMaps=function(){(window.acemarSedesMapConfig||[]).forEach(t=>{const a=document.getElementById(t);a&&function(t,a){t.dataset.mapApiKey;const o=parseInt(t.dataset.mapZoom)||6,r=parseFloat(t.dataset.mapCenterLat)||4.570868,l=parseFloat(t.dataset.mapCenterLng)||-74.297333,s=JSON.parse(t.dataset.sedes||"[]"),n=t.dataset.markerSvg||"",c=parseInt(t.dataset.markerWidth)||40,i=parseInt(t.dataset.markerHeight)||40,d=document.getElementById(`${a}-map`),f=document.getElementById(`${a}-list`),p=document.getElementById(`${a}-search`);if(!d)return;const m=new google.maps.Map(d,{center:{lat:r,lng:l},zoom:o,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#4a4a4a"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9e8f5"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f0"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#ffffff"},{weight:1.5}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#e8ede5"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c0c0b8"},{weight:1}]}],mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}}),y={},g={};s.forEach(t=>{if(!t.lat||!t.lng)return;const a=n?{url:n,scaledSize:new google.maps.Size(c,i),anchor:new google.maps.Point(c/2,i)}:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:"#b5955a",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},o=new google.maps.Marker({position:{lat:t.lat,lng:t.lng},map:m,title:t.nombre,icon:a}),r=`\n            <div class="acemar-infowindow">\n                <strong>${t.nombre}</strong>\n                <p>${t.direccion}</p>\n                <p>${t.telefono}</p>\n                ${t.urlDetalle?`<a href="${t.urlDetalle}" target="_blank">Ver sede â†’</a>`:""}\n            </div>\n        `,l=new google.maps.InfoWindow({content:r});o.addListener("click",()=>{Object.values(g).forEach(e=>e.close()),l.open(m,o),m.panTo(o.getPosition()),e(f,t.id)}),y[t.id]=o,g[t.id]=l}),f&&f.addEventListener("click",t=>{const a=t.target.closest(".acemar-sede-card");if(!a)return;const o=a.dataset.sedeId,r=parseFloat(a.dataset.lat),l=parseFloat(a.dataset.lng);r&&l&&(m.panTo({lat:r,lng:l}),m.setZoom(13),Object.values(g).forEach(e=>e.close()),g[o]&&g[o].open(m,y[o]),e(f,o))}),p&&p.addEventListener("input",()=>{const e=p.value.toLowerCase().trim();f.querySelectorAll(".acemar-sede-card").forEach(t=>{const a=t.dataset.ciudad||"",o=t.querySelector(".acemar-sede-card__name")?.textContent.toLowerCase()||"",r=!e||a.includes(e)||o.includes(e);t.style.display=r?"":"none"})})}(a,t)})}})();
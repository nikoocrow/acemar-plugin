(()=>{"use strict";const e=window.wp.blocks,a=window.wp.i18n,t=window.React,l=window.wp.blockEditor,n=window.wp.components,r=window.wp.element,o=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"acemar/sedes-map","version":"1.0.0","title":"Acemar â€“ Mapa de Sedes","category":"theme","icon":"location","description":"Muestra el mapa de sedes de Acemar con buscador y listado de ubicaciones.","keywords":["sedes","mapa","ubicaciones","colombia"],"supports":{"html":false,"align":["full","wide"]},"attributes":{"titulo":{"type":"string","default":"Encuentra una Sede Acemar Cerca de Ti"},"descripcion":{"type":"string","default":"Encuentra tu sede Acemar mÃ¡s cercana y conoce a los profesionales de confianza en toda Colombia."},"googleMapsApiKey":{"type":"string","default":""},"mapCenter":{"type":"object","default":{"lat":4.570868,"lng":-74.297333}},"mapZoom":{"type":"number","default":6},"sedes":{"type":"array","default":[]},"markerSvgUrl":{"type":"string","default":""},"markerWidth":{"type":"number","default":40},"markerHeight":{"type":"number","default":40}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-frontend.css","viewScript":"file:./view.js","render":"file:./render.php"}');(0,e.registerBlockType)(o.name,{...o,edit:function({attributes:e,setAttributes:o}){const{titulo:c,descripcion:s,googleMapsApiKey:i,mapZoom:m,sedes:d,markerSvgUrl:p,markerWidth:u,markerHeight:g}=e,E=(0,l.useBlockProps)({className:"acemar-sedes-map-editor"}),v=(e,a,t)=>{const l=d.map((l,n)=>n===e?{...l,[a]:t}:l);o({sedes:l})};return(0,t.createElement)(r.Fragment,null,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:"ConfiguraciÃ³n General",initialOpen:!0},(0,t.createElement)(n.TextControl,{label:"TÃ­tulo de la secciÃ³n",value:c,onChange:e=>o({titulo:e})}),(0,t.createElement)(n.TextareaControl,{label:"DescripciÃ³n",value:s,onChange:e=>o({descripcion:e}),rows:3})),(0,t.createElement)(n.PanelBody,{title:"Google Maps",initialOpen:!0},!i&&(0,t.createElement)(n.Notice,{status:"warning",isDismissible:!1},(0,a.__)("Ingresa tu API Key de Google Maps para activar el mapa.")),(0,t.createElement)(n.TextControl,{label:"API Key de Google Maps",value:i,onChange:e=>o({googleMapsApiKey:e}),placeholder:"AIzaSy...",help:"Necesitas una API Key con Maps JavaScript API habilitada."}),(0,t.createElement)(n.RangeControl,{label:"Zoom inicial del mapa",value:m,onChange:e=>o({mapZoom:e}),min:4,max:15}),(0,t.createElement)(n.TextControl,{label:"URL del Pin SVG (opcional)",value:p,onChange:e=>o({markerSvgUrl:e}),placeholder:"https://... (vacÃ­o = pin default)",help:"Sube el SVG a la biblioteca de medios y pega la URL."}),p&&(0,t.createElement)(n.Flex,null,(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)(n.RangeControl,{label:"Ancho del pin (px)",value:u,onChange:e=>o({markerWidth:e}),min:16,max:80})),(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)(n.RangeControl,{label:"Alto del pin (px)",value:g,onChange:e=>o({markerHeight:e}),min:16,max:80})))),(0,t.createElement)(n.PanelBody,{title:`Sedes (${d.length})`,initialOpen:!0},d.map((e,a)=>(0,t.createElement)("div",{key:e.id,className:"acemar-sede-item"},(0,t.createElement)(n.Flex,{justify:"space-between",align:"center"},(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)("strong",null,e.nombre||`Sede ${a+1}`)),(0,t.createElement)(n.FlexItem,null,(0,t.createElement)(n.Button,{isDestructive:!0,variant:"tertiary",size:"small",onClick:()=>(e=>{o({sedes:d.filter((a,t)=>t!==e)})})(a)},"Eliminar"))),(0,t.createElement)(n.TextControl,{label:"Nombre",value:e.nombre,onChange:e=>v(a,"nombre",e),placeholder:"Ej: BogotÃ¡ â€“ Sede Centro"}),(0,t.createElement)(n.TextControl,{label:"Ciudad",value:e.ciudad,onChange:e=>v(a,"ciudad",e)}),(0,t.createElement)(n.TextControl,{label:"Departamento",value:e.departamento,onChange:e=>v(a,"departamento",e)}),(0,t.createElement)(n.TextareaControl,{label:"DirecciÃ³n",value:e.direccion,onChange:e=>v(a,"direccion",e),rows:2}),(0,t.createElement)(n.TextControl,{label:"TelÃ©fono",value:e.telefono,onChange:e=>v(a,"telefono",e),placeholder:"(601) 234-5678"}),(0,t.createElement)(n.Flex,null,(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)(n.TextControl,{label:"Latitud",type:"number",value:e.lat,onChange:e=>v(a,"lat",parseFloat(e)),step:"0.0001"})),(0,t.createElement)(n.FlexBlock,null,(0,t.createElement)(n.TextControl,{label:"Longitud",type:"number",value:e.lng,onChange:e=>v(a,"lng",parseFloat(e)),step:"0.0001"}))),(0,t.createElement)(n.TextControl,{label:"URL Ver Detalle",value:e.urlDetalle,onChange:e=>v(a,"urlDetalle",e),placeholder:"https://..."}),(0,t.createElement)(n.TextControl,{label:"URL Agendar / Contacto",value:e.urlContacto,onChange:e=>v(a,"urlContacto",e),placeholder:"https://..."}),(0,t.createElement)("div",{style:{margin:"12px 0",height:"1px",background:"#e0ddd6"}}))),(0,t.createElement)(n.Button,{variant:"primary",onClick:()=>{o({sedes:[...d,{id:"sede-"+Math.random().toString(36).substr(2,9),nombre:"",direccion:"",telefono:"",ciudad:"",departamento:"",lat:4.570868,lng:-74.297333,urlDetalle:"",urlContacto:""}]})},style:{marginTop:"8px",width:"100%"}},"+ Agregar Sede"))),(0,t.createElement)("div",{...E},(0,t.createElement)("div",{className:"acemar-sedes-editor-preview"},(0,t.createElement)("div",{className:"acemar-sedes-preview__left"},(0,t.createElement)("p",{className:"acemar-sedes-preview__tag"},"Todas las sedes"),(0,t.createElement)("h2",{className:"acemar-sedes-preview__title"},c),(0,t.createElement)("p",{className:"acemar-sedes-preview__desc"},s),(0,t.createElement)("div",{className:"acemar-sedes-preview__search"},(0,t.createElement)("input",{type:"text",placeholder:"Buscar por ciudad o departamento...",disabled:!0})),(0,t.createElement)("div",{className:"acemar-sedes-preview__list"},d.map(e=>(0,t.createElement)("div",{key:e.id,className:"acemar-sede-card"},(0,t.createElement)("div",{className:"acemar-sede-card__header"},(0,t.createElement)("strong",null,e.nombre||"Nueva Sede")),(0,t.createElement)("div",{className:"acemar-sede-card__body"},(0,t.createElement)("span",null,e.direccion),(0,t.createElement)("span",null,e.telefono)),(0,t.createElement)("div",{className:"acemar-sede-card__actions"},(0,t.createElement)("button",{className:"btn-outline"},"Agendar"),(0,t.createElement)("button",{className:"btn-solid"},"Ver Detalle")))))),(0,t.createElement)("div",{className:"acemar-sedes-preview__right"},i?(0,t.createElement)("div",{className:"acemar-sedes-preview__map-placeholder"},"ðŸ—ºï¸ Mapa activo â€” se renderiza en el frontend",(0,t.createElement)("small",null,d.length," sede(s) configurada(s)")):(0,t.createElement)("div",{className:"acemar-sedes-preview__map-placeholder acemar-sedes-preview__map-placeholder--warn"},"âš ï¸ Agrega tu API Key de Google Maps en el panel lateral")))))},save:()=>null})})();